<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">

<ui:composition template="/WEB-INF/template.xhtml">
	<ui:define name="title">My Cart</ui:define>

	<ui:define name="left-menu">
		<ui:include src="/member/left-menu.xhtml" />
	</ui:define>

	<ui:define name="content">

		<h3 class="page-title">
			<i class="fa fa-shopping-cart"></i> My Cart 
			<h:link styleClass="btn btn-outline-danger pull-right" outcome="/member/checkout">
				<i class="fa fa-check"></i> Check Out
			</h:link>
		</h3>
		<hr/>		

		<h:form>
		<table class="table table-sm table-hover">
			<thead>
				<tr>
					<th>Item</th>
					<th class="text-xs-right">Unit Price</th>
					<th class="text-xs-right">Count</th>
					<th class="text-xs-right">Total</th>
				</tr>
			</thead>
			
			<tbody>
			
				<ui:repeat var="od" value="#{myCartBean.orders}">
				<tr>
					<td style="width: 50%">
						<div class="row">
							<div class="col-xs-3">
								<h:graphicImage styleClass="img-thumbnail img-fluid" library="image" name="boyTshirt.jpg" />
							</div>
							<div class="col-xs-6">
								<h6>#{od.product.name}</h6>
								<h:outputText value="#{od.product.description}" /><br/>
								<h:outputFormat value="#{od.size}" />
							</div>
							<div class="col-xs-2">
								<h:commandLink actionListener="#{myCartBean.delete(od)}" styleClass="btn btn-link" >
									<i class="fa fa-trash"></i>
									<f:ajax execute="@form" render="@all"></f:ajax>
								</h:commandLink>
							</div>
						</div>
					</td>

					<td class="text-xs-right">#{od.unitPrice}</td>
					<td class="text-xs-right">
						<h:commandLink actionListener="#{myCartBean.countDown(od)}" styleClass="btn btn-circle btn-outline-info MarRight10" >
							<i class="fa fa-minus"></i>
							<f:ajax execute="@form" render="@all"></f:ajax>
						</h:commandLink>
						<h:outputText styleClass="MarRight10" value="#{od.count}" />
						<h:commandLink actionListener="#{myCartBean.countUp(od)}" styleClass="btn btn-circle btn-outline-info" >
							<i class="fa fa-plus"></i>
							<f:ajax execute="@form" render="@all"></f:ajax>
						</h:commandLink>
					</td>
					<td class="text-xs-right">#{od.subTotal}</td>
				</tr>
				</ui:repeat>


			</tbody>
			
			<tfoot>
				<tr>
					<td colspan="3" class="text-xs-right">Sub Total</td>
					<td class="text-xs-right">#{myCartBean.subTotal}</td>
				</tr>
				<tr>
					<td colspan="3" class="text-xs-right">Tax</td>
					<td class="text-xs-right">#{myCartBean.tax}</td>
				</tr>
				<tr>
					<td colspan="3" class="text-xs-right">Total</td>
					<td class="text-xs-right">#{myCartBean.total}</td>
				</tr>
			</tfoot>
		</table>
		</h:form>
		
	</ui:define>
</ui:composition>
</html>