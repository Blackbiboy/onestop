<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">

	<ui:composition template="/WEB-INF/template.xhtml">
	
		<ui:define name="title">Photos | Shout</ui:define>
		
		<ui:define name="content">
		
			<div class="row MarTop20">
			
				<div class="col m4 hide-on-small-and-down">
					<div class="collection with-header">
						<h5 class="collection-header">Categories</h5>
						<ui:repeat var="cat" value="#{categories}">
							<h:link value="#{cat.name}" outcome="photos" styleClass="collection-item">
								<f:param name="cat" value="#{cat.id}"></f:param>
							</h:link>
						</ui:repeat>
					</div>
				</div>
				
				<div class="col m8 s12">
					
					<h:form>
					<ui:repeat var="post" value="#{photosBean.allPost}">
					
						<div class="card">
							<div class="card-image waves-effect">
								<h:graphicImage styleClass="responsive-img fullWidthImage" value="/image/#{empty post.image ? 'camera.jpg' : post.image}" />
								<span class="card-title">#{post.title}</span>
							</div>
							
							<div class="card-content">
								<p>#{post.description}</p>
								
								<h:outputText styleClass="grey-text" value="#{post.categoryString}" />
								<span class="small grey-text">#{post.creation}</span>
							</div>
							
							<div class="card-action">
								
								<h:commandLink styleClass="small" actionListener="#{photosBean.like(post)}" rendered="#{not empty loginUser}">
									<i class="material-icons fs18 left">sentiment_satisfied</i>#{post.smiles.size()}
									<f:ajax execute="@form" render="@form"></f:ajax>
								</h:commandLink>
								
								<h:panelGroup rendered="#{empty loginUser}">
									<i class="material-icons fs18 left">sentiment_satisfied</i>#{post.smiles.size()}
								</h:panelGroup>
								
								<span class="right small">
									<i class="material-icons fs18 left">account_circle</i> #{post.owner.name}
								</span>
								
							</div>
						</div>
					</ui:repeat>
					</h:form>
					
				</div>
			</div>
		
		</ui:define>
	</ui:composition>
</html>